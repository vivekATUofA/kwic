@startuml
title KWIC - Event-Based (Implicit Invocation) Architecture

actor User

class KWICMain {
  +main()
}

class EventManager {
  +register(event, listener)
  +trigger(event, data)
}

class Input {
  +onInput()
}

class CircularShifter {
  +onLineAdded()
}

class Alphabetizer {
  +onShiftsGenerated()
}

class Output {
  +onSorted()
}

User --> KWICMain : run()

KWICMain --> EventManager

EventManager --> Input : trigger("start")
Input --> EventManager : trigger("line_added")
EventManager --> CircularShifter : trigger("line_added")
CircularShifter --> EventManager : trigger("shifts_generated")
EventManager --> Alphabetizer : trigger("shifts_generated")
Alphabetizer --> EventManager : trigger("sorted_ready")
EventManager --> Output : trigger("sorted_ready")

@enduml
